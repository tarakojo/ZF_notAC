%
\begin{isabellebody}%
\setisabellecontext{Symmetry{\isacharunderscore}{\kern0pt}Lemma}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Symmetry{\isacharunderscore}{\kern0pt}Lemma\isanewline
\ \ \isakeyword{imports}\ \isanewline
\ \ \ \ {\isachardoublequoteopen}Forcing{\isacharslash}{\kern0pt}Forcing{\isacharunderscore}{\kern0pt}Main{\isachardoublequoteclose}\ \isanewline
\ \ \ \ HS{\isacharunderscore}{\kern0pt}Forces\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\ \isanewline
%
\endisadelimtheory
\isanewline
\isacommand{context}\isamarkupfalse%
\ M{\isacharunderscore}{\kern0pt}symmetric{\isacharunderscore}{\kern0pt}system\isanewline
\isakeyword{begin}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}base\ {\isacharcolon}{\kern0pt}\ \isanewline
\ \ {\isachardoublequoteopen}{\isasymAnd}{\isasympi}\ p\ x\ y{\isachardot}{\kern0pt}\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ \isanewline
\ \ \ \ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ {\isasymand}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{fix}\isamarkupfalse%
\ {\isasympi}\ \isanewline
\ \ \isacommand{assume}\isamarkupfalse%
\ piauto\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\isanewline
\ \ \isacommand{define}\isamarkupfalse%
\ MEM\ \isakeyword{where}\ {\isachardoublequoteopen}MEM\ {\isasymequiv}\ {\isasymlambda}\ p\ x\ y\ {\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{define}\isamarkupfalse%
\ EQ\ \isakeyword{where}\ {\isachardoublequoteopen}EQ\ {\isasymequiv}\ {\isasymlambda}\ p\ x\ y\ {\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \isacommand{define}\isamarkupfalse%
\ Q\ \isakeyword{where}\ {\isachardoublequoteopen}Q\ {\isasymequiv}\ {\isasymlambda}\ Q\ a\ b{\isachardot}{\kern0pt}\ {\isasymforall}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}p\ {\isasymin}\ P{\isachardot}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ a\ {\isasymlongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymlongrightarrow}\ Q{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ MEM{\isacharunderscore}{\kern0pt}step{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}a{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isasymforall}b\ {\isasymin}\ a{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ b{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isasymforall}b\ {\isasymin}\ a{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ Q{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}clarify{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ a\ b\ x\ y\ p\ \isanewline
\ \ \ \ \isacommand{assume}\isamarkupfalse%
\ xrank{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ b{\isachardoublequoteclose}\ \isakeyword{and}\ yrank{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ a{\isachardoublequoteclose}\ \isakeyword{and}\ bina\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}b\ {\isasymin}\ a{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ orda\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ pinP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}p\ {\isasymin}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ xpname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isakeyword{and}\ ypname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymforall}b{\isasymin}a{\isachardot}{\kern0pt}\ {\isasymforall}x{\isasymin}P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}y{\isasymin}P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}p{\isasymin}P{\isachardot}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymlongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymlongrightarrow}\ EQ{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isachardoublequoteclose}\isanewline
\isanewline
\ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ EQH\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}b\ x\ y\ p{\isachardot}{\kern0pt}\ b\ {\isasymin}\ a\ {\isasymLongrightarrow}\ x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymLongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymLongrightarrow}\ EQ{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \ \isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ \ dense{\isacharunderscore}{\kern0pt}below{\isacharparenleft}{\kern0pt}{\isacharbraceleft}{\kern0pt}\ q{\isasymin}P{\isachardot}{\kern0pt}\ {\isasymexists}s{\isachardot}{\kern0pt}\ {\isasymexists}r{\isachardot}{\kern0pt}\ r{\isasymin}P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}r{\isasymrangle}\ {\isasymin}\ y\ {\isasymand}\ q{\isasympreceq}r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isacharcomma}{\kern0pt}\ p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ forces{\isacharunderscore}{\kern0pt}mem{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}dense{\isacharunderscore}{\kern0pt}below\ pinP\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ dense{\isacharunderscore}{\kern0pt}below{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}{\isacharbackquote}{\kern0pt}{\isacharbraceleft}{\kern0pt}\ q{\isasymin}P{\isachardot}{\kern0pt}\ {\isasymexists}s{\isachardot}{\kern0pt}\ {\isasymexists}r{\isachardot}{\kern0pt}\ r{\isasymin}P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}r{\isasymrangle}\ {\isasymin}\ y\ {\isasymand}\ q{\isasympreceq}r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}preserves{\isacharunderscore}{\kern0pt}density{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ pinP\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ dense{\isacharunderscore}{\kern0pt}below{\isacharparenleft}{\kern0pt}{\isacharbraceleft}{\kern0pt}\ q{\isasymin}P{\isachardot}{\kern0pt}\ {\isasymexists}s{\isachardot}{\kern0pt}\ {\isasymexists}r{\isachardot}{\kern0pt}\ r{\isasymin}P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}r{\isasymrangle}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y\ {\isasymand}\ q{\isasympreceq}r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{define}\isamarkupfalse%
\ X\ \isakeyword{where}\ {\isachardoublequoteopen}X\ {\isasymequiv}\ {\isacharbraceleft}{\kern0pt}\ q{\isasymin}P{\isachardot}{\kern0pt}\ {\isasymexists}s{\isachardot}{\kern0pt}\ {\isasymexists}r{\isachardot}{\kern0pt}\ r{\isasymin}P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}r{\isasymrangle}\ {\isasymin}\ y\ {\isasymand}\ q{\isasympreceq}r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{define}\isamarkupfalse%
\ Y\ \isakeyword{where}\ {\isachardoublequoteopen}Y\ {\isasymequiv}\ {\isacharbraceleft}{\kern0pt}\ q{\isasymin}P{\isachardot}{\kern0pt}\ {\isasymexists}s{\isachardot}{\kern0pt}\ {\isasymexists}r{\isachardot}{\kern0pt}\ r{\isasymin}P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}r{\isasymrangle}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y\ {\isasymand}\ q{\isasympreceq}r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isacharbraceright}{\kern0pt}\ {\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}{\isacharbackquote}{\kern0pt}X\ {\isacharequal}{\kern0pt}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ equality{\isacharunderscore}{\kern0pt}iffI{\isacharsemicolon}{\kern0pt}\ rule\ iffI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}X\ \isakeyword{and}\ r{\isacharequal}{\kern0pt}{\isasympi}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}x\ \isakeyword{in}\ imageE{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}Y{\isacharunderscore}{\kern0pt}def{\isacharsemicolon}{\kern0pt}\ rule\ conjI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}fun\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ Pi{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ q\ piq\ \isacommand{assume}\isamarkupfalse%
\ assms\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}q{\isacharcomma}{\kern0pt}\ piq{\isachargreater}{\kern0pt}\ {\isasymin}\ {\isasympi}{\isachardoublequoteclose}\ \ {\isachardoublequoteopen}q\ {\isasymin}\ X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ s\ r\ \isakeyword{where}\ srH\ {\isacharcolon}{\kern0pt}\ \ {\isachardoublequoteopen}r\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ r{\isachargreater}{\kern0pt}\ {\isasymin}\ y{\isachardoublequoteclose}\ {\isachardoublequoteopen}q{\isasympreceq}r{\isachardoublequoteclose}\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ X{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ H{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasymin}\ P\ {\isasymand}\ {\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isacharequal}{\kern0pt}\ piq{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ B{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}P{\isachardoublequoteclose}\ \isakeyword{in}\ apply{\isacharunderscore}{\kern0pt}fun{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}fun\ piauto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ assms\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ H{\isadigit{2}}{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isacharequal}{\kern0pt}\ piq{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ H{\isadigit{3}}{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasympreceq}\ {\isasympi}\ {\isacharbackquote}{\kern0pt}\ r{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}preserves{\isacharunderscore}{\kern0pt}leq{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ H\ srH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}s\ r{\isachardot}{\kern0pt}\ r\ {\isasymin}\ P\ {\isasymand}\ {\isasymlangle}s{\isacharcomma}{\kern0pt}\ r{\isasymrangle}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y\ {\isasymand}\ piq\ {\isasympreceq}\ r\ {\isasymand}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}piq{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}r{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ piauto\ srH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isacharbraceleft}{\kern0pt}{\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}z{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}v{\isachargreater}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}z{\isacharcomma}{\kern0pt}\ v{\isachargreater}{\kern0pt}\ {\isasymin}\ y{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isachardoublequoteclose}\ \isakeyword{in}\ ssubst{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Pn{\isacharunderscore}{\kern0pt}auto\ ypname\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ pair{\isacharunderscore}{\kern0pt}relI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srH\ H\ H{\isadigit{2}}\ H{\isadigit{3}}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isachardoublequoteclose}\ \isakeyword{and}\ b\ {\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}piq{\isachardoublequoteclose}\ \isakeyword{in}\ ssubst{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ H\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}EQ{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ EQ{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}\ {\isasymle}\ b{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ EQH{\isacharbrackleft}{\kern0pt}of\ b{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isacommand{using}\isamarkupfalse%
\ bina\ xpname\ ypname\ H\ xrank\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ srH\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}b\ {\isasymle}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ impI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ EQH{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ ltD{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}lt\ yrank\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}b\ \isakeyword{in}\ le{\isacharunderscore}{\kern0pt}trans{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xrank\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}b\ {\isacharless}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ lt{\isacharunderscore}{\kern0pt}succ{\isacharunderscore}{\kern0pt}lt\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ not{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}lt\ orda\ Ord{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}Ord\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ q{\isacharprime}{\kern0pt}\ \isacommand{assume}\isamarkupfalse%
\ qinY\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isasymin}\ Y{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ q{\isacharprime}{\kern0pt}inP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isasymin}\ P{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ Y{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}\ r{\isacharprime}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isakeyword{where}\ s{\isacharprime}{\kern0pt}r{\isacharprime}{\kern0pt}H\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}r{\isacharprime}{\kern0pt}\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ r{\isacharprime}{\kern0pt}{\isachargreater}{\kern0pt}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isachardoublequoteclose}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}{\isasympreceq}r{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ qinY\ \isacommand{unfolding}\isamarkupfalse%
\ Y{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}s\ r{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ r{\isachargreater}{\kern0pt}\ {\isasymin}\ y\ {\isasymand}\ \ {\isacharless}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ r{\isacharprime}{\kern0pt}{\isachargreater}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}r{\isachargreater}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ pair{\isacharunderscore}{\kern0pt}rel{\isacharunderscore}{\kern0pt}arg{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ relation{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ ypname\ s{\isacharprime}{\kern0pt}r{\isacharprime}{\kern0pt}H\ Pn{\isacharunderscore}{\kern0pt}auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ s\ r\ \isakeyword{where}\ srH\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ r{\isachargreater}{\kern0pt}{\isasymin}\ y{\isachardoublequoteclose}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isachardoublequoteclose}\ {\isachardoublequoteopen}r{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}r{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasympi}\ {\isasymin}\ surj{\isacharparenleft}{\kern0pt}P{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}surj\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ q\ \isakeyword{where}\ qH{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isacharequal}{\kern0pt}\ q{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ surj{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ q{\isacharprime}{\kern0pt}inP\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ rinP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}r\ {\isasymin}\ P{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}y\ \isakeyword{and}\ y{\isacharequal}{\kern0pt}s\ \isakeyword{in}\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}range{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ srH\ qH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ qr\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isasympreceq}r{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}r{\isacharprime}{\kern0pt}H\ srH\ qH\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}preserves{\isacharunderscore}{\kern0pt}leq{\isacharprime}{\kern0pt}\ piauto\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ fH{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}r{\isacharprime}{\kern0pt}H\ srH\ qH\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ spname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ ypname\ srH\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isasymin}\ {\isasympi}{\isacharbackquote}{\kern0pt}{\isacharbackquote}{\kern0pt}X{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}q\ \isakeyword{in}\ imageI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isachardoublequoteclose}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}q{\isacharprime}{\kern0pt}\ \isakeyword{in}\ ssubst{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ qH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ function{\isacharunderscore}{\kern0pt}apply{\isacharunderscore}{\kern0pt}Pair{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}function\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}domain\ qH\ piauto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ X{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}s\ \isakeyword{in}\ exI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}r\ \isakeyword{in}\ exI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ conjI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ rinP\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ conjI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srH\ qH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ conjI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ qr\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}EQ{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ fH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}\ EQ{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}\ {\isasymle}\ b{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ EQH{\isacharbrackleft}{\kern0pt}of\ b{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ bina\ xpname\ ypname\ qH\ xrank\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ srH\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}b\ {\isasymle}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ impI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ EQH\ {\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ ltD{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}lt\ yrank\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}b\ \isakeyword{in}\ le{\isacharunderscore}{\kern0pt}trans{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xrank\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}b\ {\isacharless}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ lt{\isacharunderscore}{\kern0pt}succ{\isacharunderscore}{\kern0pt}lt\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ not{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}lt\ orda\ Ord{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}Ord\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isacommand{unfolding}\isamarkupfalse%
\ X{\isacharunderscore}{\kern0pt}def\ Y{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ forces{\isacharunderscore}{\kern0pt}mem{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}dense{\isacharunderscore}{\kern0pt}below{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ pinP\ piauto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ MEM{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ EQ{\isacharunderscore}{\kern0pt}step\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}a{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isasymforall}b\ {\isasymin}\ a{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \ \isanewline
\ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ Q{\isacharunderscore}{\kern0pt}def\ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ a\ x\ y\ p\ \isanewline
\ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ orda\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymforall}b{\isasymin}a{\isachardot}{\kern0pt}\ {\isasymforall}x{\isasymin}P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}y{\isasymin}P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ {\isasymforall}p{\isasymin}P{\isachardot}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymlongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ a\ {\isasymlongrightarrow}\ MEM{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isakeyword{and}\ xpname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isakeyword{and}\ ypname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isakeyword{and}\ pinP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}p\ {\isasymin}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ xrank\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ a{\isachardoublequoteclose}\ \isakeyword{and}\ yrank\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ a{\isachardoublequoteclose}\ \isanewline
\isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ MEMH\ {\isacharcolon}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ {\isachardoublequoteopen}{\isasymAnd}b\ x\ y\ p{\isachardot}{\kern0pt}\ b\ {\isasymin}\ a\ {\isasymLongrightarrow}\ x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ b\ {\isasymLongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ a\ {\isasymLongrightarrow}\ MEM{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ srank{\isacharunderscore}{\kern0pt}lemma\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}s{\isachardot}{\kern0pt}\ s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ a{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ B{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ c{\isacharequal}{\kern0pt}s\ \isakeyword{in}\ UnE{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasymexists}p{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xpname\ domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}lt\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}domain{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xrank\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasymexists}p{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ y{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}lt\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}domain{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ yrank\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\isanewline
\ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}s{\isasymin}domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}q{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ q\ {\isasympreceq}\ p\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ def{\isacharunderscore}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq\ pinP\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ \isanewline
\ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymforall}s{\isasymin}domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}q{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ q\ {\isasympreceq}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ \isanewline
\ \ \ \ \ \ \ \ \ \ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ iffI{\isacharsemicolon}{\kern0pt}\ clarify{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}\ q{\isacharprime}{\kern0pt}\ \ \isacommand{assume}\isamarkupfalse%
\ assm{\isacharcolon}{\kern0pt}\ \ {\isachardoublequoteopen}{\isasymforall}s{\isasymin}domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}q{\isachardot}{\kern0pt}\ q\ {\isasymin}\ P\ {\isasymand}\ q\ {\isasympreceq}\ p\ {\isasymlongrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ s{\isacharprime}{\kern0pt}in\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ q{\isacharprime}{\kern0pt}inP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isasymin}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ q{\isacharprime}{\kern0pt}le\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isasympreceq}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachardoublequoteclose}\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{obtain}\isamarkupfalse%
\ q\ \isakeyword{where}\ qH\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}q{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}q{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ \isacommand{unfolding}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}surj\ \ q{\isacharprime}{\kern0pt}inP\ \isacommand{unfolding}\isamarkupfalse%
\ surj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ qlep\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasympreceq}\ p{\isachardoublequoteclose}\ \ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ {\isasympi}{\isacharequal}{\kern0pt}{\isasympi}\ \isakeyword{in}\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}preserves{\isacharunderscore}{\kern0pt}leq{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ pinP\ q{\isacharprime}{\kern0pt}le\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}pname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ B{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ c{\isacharequal}{\kern0pt}s{\isacharprime}{\kern0pt}\ \isakeyword{in}\ UnE{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}in\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xpname\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ piauto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ piauto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ s\ \isakeyword{where}\ sH\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}bij\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}surj\ \isacommand{unfolding}\isamarkupfalse%
\ surj{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ blast\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ domain{\isacharunderscore}{\kern0pt}lemma\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}{\kern0pt}\ x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ s{\isacharprime}{\kern0pt}\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ \isacommand{assume}\isamarkupfalse%
\ xpname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isakeyword{and}\ s{\isacharprime}{\kern0pt}in\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ p{\isacharprime}{\kern0pt}\ \isakeyword{where}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ p{\isacharprime}{\kern0pt}{\isachargreater}{\kern0pt}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ p{\isacharprime}{\kern0pt}{\isachargreater}{\kern0pt}\ {\isasymin}\ {\isacharbraceleft}{\kern0pt}\ {\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachargreater}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x\ {\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Pn{\isacharunderscore}{\kern0pt}auto\ xpname\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymexists}t\ p{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}t{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x\ {\isasymand}\ {\isacharless}{\kern0pt}s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ p{\isacharprime}{\kern0pt}{\isachargreater}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}t{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachargreater}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ pair{\isacharunderscore}{\kern0pt}rel{\isacharunderscore}{\kern0pt}arg{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xpname\ relation{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ t\ p\ \isakeyword{where}\ tpH\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}t{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x{\isachardoublequoteclose}\ {\isachardoublequoteopen}s{\isacharprime}{\kern0pt}\ {\isacharequal}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}t{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isacharequal}{\kern0pt}\ t{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ f{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}s{\isacharprime}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ A{\isacharequal}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}names\ \isakeyword{and}\ B{\isacharequal}{\kern0pt}P{\isacharunderscore}{\kern0pt}names\ \isakeyword{in}\ inj{\isacharunderscore}{\kern0pt}equality{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isachardoublequoteclose}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}s{\isacharprime}{\kern0pt}\ \isakeyword{in}\ ssubst{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ sH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ function{\isacharunderscore}{\kern0pt}apply{\isacharunderscore}{\kern0pt}Pair{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}function\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ sH\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}domain\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ a{\isacharequal}{\kern0pt}{\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}t{\isachardoublequoteclose}\ \isakeyword{and}\ b{\isacharequal}{\kern0pt}s{\isacharprime}{\kern0pt}\ \isakeyword{in}\ ssubst{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ tpH\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ function{\isacharunderscore}{\kern0pt}apply{\isacharunderscore}{\kern0pt}Pair{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ piauto\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}function\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ sH\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}domain\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}bij\ piauto\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}inj\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ tpH\ xpname\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ tpH\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ sin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}in\ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ domain{\isacharunderscore}{\kern0pt}lemma\ s{\isacharprime}{\kern0pt}pname\ xpname\ ypname\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ srank\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ a{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srank{\isacharunderscore}{\kern0pt}lemma\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ sH\ qH\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}MEM{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ MEMH\ {\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srank\ ltD\ sH\ xpname\ qH\ le{\isacharunderscore}{\kern0pt}refl\ xrank\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \ \ \ \ \ \ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ qH\ qlep\ assm\ sin\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}MEM{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ MEMH{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srank\ ltD\ sH\ ypname\ qH\ le{\isacharunderscore}{\kern0pt}refl\ yrank\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \ \isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ sH\ qH\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{next}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ s\ q\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{assume}\isamarkupfalse%
\ assm{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}s{\isacharprime}{\kern0pt}{\isasymin}domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isasymforall}q{\isacharprime}{\kern0pt}{\isachardot}{\kern0pt}\ q{\isacharprime}{\kern0pt}\ {\isasymin}\ P\ {\isasymand}\ q{\isacharprime}{\kern0pt}\ {\isasympreceq}\ {\isasympi}\ {\isacharbackquote}{\kern0pt}\ p\ {\isasymlongrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ s{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ sin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isakeyword{and}\ qinP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasymin}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ qlep\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}q\ {\isasympreceq}\ p{\isachardoublequoteclose}\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ srank\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ a{\isachardoublequoteclose}\ \isacommand{using}\isamarkupfalse%
\ srank{\isacharunderscore}{\kern0pt}lemma\ sin\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ domain{\isacharunderscore}{\kern0pt}lemma\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}x{\isachardot}{\kern0pt}\ x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names\ {\isasymLongrightarrow}\ \ s{\isasymin}domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ \isacommand{assume}\isamarkupfalse%
\ assms\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{obtain}\isamarkupfalse%
\ p\ \isakeyword{where}\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x{\isachardoublequoteclose}\ \isacommand{unfolding}\isamarkupfalse%
\ domain{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachargreater}{\kern0pt}\ {\isasymin}\ {\isacharbraceleft}{\kern0pt}\ {\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachargreater}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharless}{\kern0pt}s{\isacharcomma}{\kern0pt}\ p{\isachargreater}{\kern0pt}\ {\isasymin}\ x\ {\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ pair{\isacharunderscore}{\kern0pt}relI{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharless}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachargreater}{\kern0pt}\ {\isasymin}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ piauto\ Pn{\isacharunderscore}{\kern0pt}auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ s{\isacharprime}{\kern0pt}in\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s\ {\isasymin}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ domain{\isacharparenleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ B{\isacharequal}{\kern0pt}{\isachardoublequoteopen}domain{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{and}\ c{\isacharequal}{\kern0pt}s\ \isakeyword{in}\ UnE{\isacharparenright}{\kern0pt}\ \ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ sin\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ UnI{\isadigit{1}}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ domain{\isacharunderscore}{\kern0pt}lemma{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xpname\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ UnI{\isadigit{2}}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ domain{\isacharunderscore}{\kern0pt}lemma{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ q{\isacharprime}{\kern0pt}H\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasymin}\ P\ {\isasymand}\ {\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasympreceq}\ {\isasympi}{\isacharbackquote}{\kern0pt}p{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ qinP\ qlep\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ piauto\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}preserves{\isacharunderscore}{\kern0pt}leq\ pinP\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}MEM{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ MEMH{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srank\ ltD\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name{\isacharprime}{\kern0pt}\ sin\ xpname\ ypname\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ xpname\ qinP\ le{\isacharunderscore}{\kern0pt}refl\ xrank\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}s{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assm\ q{\isacharprime}{\kern0pt}H\ s{\isacharprime}{\kern0pt}in\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}s{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}MEM{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ MEMH{\isacharbrackleft}{\kern0pt}of\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}s{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ srank\ ltD\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}domain{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}name{\isacharprime}{\kern0pt}\ sin\ xpname\ ypname\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ blast\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ypname\ qinP\ le{\isacharunderscore}{\kern0pt}refl\ yrank\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp{\isacharunderscore}{\kern0pt}all\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}q{\isacharcomma}{\kern0pt}\ s{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ def{\isacharunderscore}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ pinP\ piauto\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}EQ{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}x{\isacharcomma}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ EQ{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ main\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}a{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymand}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ eps{\isacharunderscore}{\kern0pt}induct{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule\ impI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{fix}\isamarkupfalse%
\ a\ \isacommand{assume}\isamarkupfalse%
\ ih{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}b\ {\isasymin}\ a{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}b{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}b{\isacharparenright}{\kern0pt}\ {\isasymand}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}b{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isakeyword{and}\ orda\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Ord{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}b\ {\isasymin}\ a{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ MEM{\isacharunderscore}{\kern0pt}step{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ orda\ Ord{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}Ord\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ H\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ EQ{\isacharunderscore}{\kern0pt}step{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ orda\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}b\ {\isasymin}\ succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ b{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ i{\isacharequal}{\kern0pt}b\ \isakeyword{and}\ j{\isacharequal}{\kern0pt}a\ \isakeyword{in}\ leE{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ltI\ orda\ \isanewline
\ \ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ltD\ ih\ orda\ lt{\isacharunderscore}{\kern0pt}Ord\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}b\ {\isasymin}\ succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\ Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ MEM{\isacharunderscore}{\kern0pt}step{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ orda\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{unfolding}\isamarkupfalse%
\ Q{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}a\ \isakeyword{in}\ le{\isacharunderscore}{\kern0pt}trans{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}{\isachardoublequoteopen}succ{\isacharparenleft}{\kern0pt}a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}trans{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ le{\isacharunderscore}{\kern0pt}refl\ orda\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}\ Q{\isacharparenleft}{\kern0pt}{\isasymlambda}a\ b\ c{\isachardot}{\kern0pt}\ MEM{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ c{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymand}\ Q{\isacharparenleft}{\kern0pt}{\isasymlambda}a\ b\ c{\isachardot}{\kern0pt}\ EQ{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ c{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ H\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\ \ \ \ \ \ \isanewline
\ \ \ \ \isacommand{fix}\isamarkupfalse%
\ x\ y\ p\ \isacommand{assume}\isamarkupfalse%
\ pinP\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}p\ {\isasymin}\ P{\isachardoublequoteclose}\ \isakeyword{and}\ xpname\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}x\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isakeyword{and}\ ypname{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardoublequoteclose}\ \isanewline
\isanewline
\ \ \ \ \isacommand{define}\isamarkupfalse%
\ r\ \isakeyword{where}\ {\isachardoublequoteopen}r\ {\isasymequiv}\ if\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ then\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ else\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ roed\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Ord{\isacharparenleft}{\kern0pt}r{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ r{\isacharunderscore}{\kern0pt}def\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ rle{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ r\ {\isasymand}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isasymle}\ r{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}cases\ {\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymle}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}r\ {\isacharequal}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}r{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}r\ {\isacharequal}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ P{\isacharequal}{\kern0pt}{\isachardoublequoteopen}P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}rank{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ mp{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ lt{\isacharunderscore}{\kern0pt}succ{\isacharunderscore}{\kern0pt}lt\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ not{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}iff{\isacharunderscore}{\kern0pt}lt\ P{\isacharunderscore}{\kern0pt}rank{\isacharunderscore}{\kern0pt}ord\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}simp\ add{\isacharcolon}{\kern0pt}r{\isacharunderscore}{\kern0pt}def{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ H\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}Q{\isacharparenleft}{\kern0pt}MEM{\isacharcomma}{\kern0pt}\ r{\isacharcomma}{\kern0pt}r{\isacharparenright}{\kern0pt}\ {\isasymand}\ Q{\isacharparenleft}{\kern0pt}EQ{\isacharcomma}{\kern0pt}\ r{\isacharcomma}{\kern0pt}r{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ roed\ main\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ H{\isadigit{1}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}MEM{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ H\ \isacommand{unfolding}\isamarkupfalse%
\ Q{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ xpname\ ypname\ pinP\ rle\ \isacommand{apply}\isamarkupfalse%
\ auto\ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ H{\isadigit{2}}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}EQ{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ H\ \isacommand{unfolding}\isamarkupfalse%
\ Q{\isacharunderscore}{\kern0pt}def\ \isacommand{using}\isamarkupfalse%
\ xpname\ ypname\ pinP\ rle\ \isacommand{apply}\isamarkupfalse%
\ auto\ \isacommand{done}\isamarkupfalse%
\ \isanewline
\ \ \ \ \isanewline
\ \ \ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}\ {\isacharbackquote}{\kern0pt}\ p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}\ {\isacharbackquote}{\kern0pt}\ p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ H{\isadigit{1}}\ H{\isadigit{2}}\ \isacommand{unfolding}\isamarkupfalse%
\ MEM{\isacharunderscore}{\kern0pt}def\ EQ{\isacharunderscore}{\kern0pt}def\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\ \ \isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}mem\ {\isacharcolon}{\kern0pt}\ \isanewline
\ \ \isakeyword{fixes}\ {\isasympi}\ p\ i\ j\ env\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}i\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}j\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ H{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}{\isasympi}\ p\ x\ y{\isachardot}{\kern0pt}\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ x\ {\isasymin}\ HS\ {\isasymLongrightarrow}\ y\ {\isasymin}\ HS\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}base\ HS{\isacharunderscore}{\kern0pt}iff\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ envin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ subsetD{\isacharcomma}{\kern0pt}\ rule\ list{\isacharunderscore}{\kern0pt}mono{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ HS{\isacharunderscore}{\kern0pt}iff\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ assms\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ map{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapnthin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}i{\isachardot}{\kern0pt}\ i\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymin}\ M{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ nth{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ mapin\ length{\isacharunderscore}{\kern0pt}map\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ p\ {\isasymtturnstile}\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ ForcesHS{\isacharunderscore}{\kern0pt}Member{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ envin\ P{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ transM\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Forces{\isacharunderscore}{\kern0pt}Member{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ envin\ Forces{\isacharunderscore}{\kern0pt}Member\ nth{\isacharunderscore}{\kern0pt}type\ HS{\isacharunderscore}{\kern0pt}iff\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ nth{\isacharunderscore}{\kern0pt}type\ H\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}mem{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ nth{\isacharunderscore}{\kern0pt}map\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ Forces{\isacharunderscore}{\kern0pt}Member{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ mapin\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ nth{\isacharunderscore}{\kern0pt}type\ mapnthin\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Member{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ ForcesHS{\isacharunderscore}{\kern0pt}Member{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ mapin\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{3}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}P\ \isakeyword{in}\ subsetD{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ transM\ \isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}eq\ {\isacharcolon}{\kern0pt}\ \isanewline
\ \ \isakeyword{fixes}\ {\isasympi}\ p\ i\ j\ env\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}p\ {\isasymin}\ P{\isachardoublequoteclose}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}i\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}j\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ H{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}{\isasympi}\ p\ x\ y{\isachardot}{\kern0pt}\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ x\ {\isasymin}\ HS\ {\isasymLongrightarrow}\ y\ {\isasymin}\ HS\ \isanewline
\ \ \ \ \ \ \ \ \ \ \ \ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}base\ HS{\isacharunderscore}{\kern0pt}iff\ \isacommand{by}\isamarkupfalse%
\ auto\ \isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ envin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ subsetD{\isacharcomma}{\kern0pt}\ rule\ list{\isacharunderscore}{\kern0pt}mono{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ HS{\isacharunderscore}{\kern0pt}iff\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ assms\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ map{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapnthin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymAnd}i{\isachardot}{\kern0pt}\ i\ {\isacharless}{\kern0pt}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymin}\ M{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ nth{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ mapin\ length{\isacharunderscore}{\kern0pt}map\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ p\ {\isasymtturnstile}\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ env{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ ForcesHS{\isacharunderscore}{\kern0pt}Equal{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ envin\ P{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ transM\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Forces{\isacharunderscore}{\kern0pt}Equal{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ envin\ Forces{\isacharunderscore}{\kern0pt}Member\ nth{\isacharunderscore}{\kern0pt}type\ HS{\isacharunderscore}{\kern0pt}iff\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ nth{\isacharunderscore}{\kern0pt}type\ H\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ forces{\isacharunderscore}{\kern0pt}eq{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}p{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ nth{\isacharunderscore}{\kern0pt}map\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ Forces{\isacharunderscore}{\kern0pt}Equal{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ mapin\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ nth{\isacharunderscore}{\kern0pt}type\ mapnthin\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Equal{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ j{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ ForcesHS{\isacharunderscore}{\kern0pt}Equal{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ lt{\isacharunderscore}{\kern0pt}nat{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}nat\ mapin\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{3}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}P\ \isakeyword{in}\ subsetD{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ transM\ \isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}thesis\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ {\isasymphi}\ {\isasympi}\ \ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}{\isasymphi}\ {\isasymin}\ formula{\isachardoublequoteclose}\ {\isachardoublequoteopen}is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}{\isasympi}\ {\isasymin}\ {\isasymG}{\isachardoublequoteclose}\ \isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymAnd}env\ p{\isachardot}{\kern0pt}\ env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymle}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ p\ {\isasymin}\ P\ {\isasymLongrightarrow}\ p\ {\isasymtturnstile}HS\ {\isasymphi}\ env\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ {\isasymphi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ {\isacartoucheopen}{\isasymphi}\ {\isasymin}\ formula{\isacartoucheclose}\isanewline
\isacommand{proof}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}induct{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}Member\ x\ y{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}case\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}mem{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{3}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}succ{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharcomma}{\kern0pt}\ rule\ ltI{\isacharcomma}{\kern0pt}\ simp{\isacharcomma}{\kern0pt}\ simp{\isacharcomma}{\kern0pt}\ simp{\isacharparenright}{\kern0pt}{\isacharplus}{\kern0pt}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}Equal\ x\ y{\isacharparenright}{\kern0pt}\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}case\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ symmetry{\isacharunderscore}{\kern0pt}lemma{\isacharunderscore}{\kern0pt}eq{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{3}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ b{\isacharequal}{\kern0pt}{\isachardoublequoteopen}succ{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ lt{\isacharunderscore}{\kern0pt}le{\isacharunderscore}{\kern0pt}lt{\isacharcomma}{\kern0pt}\ rule\ ltI{\isacharcomma}{\kern0pt}\ simp{\isacharcomma}{\kern0pt}\ simp{\isacharcomma}{\kern0pt}\ simp{\isacharparenright}{\kern0pt}{\isacharplus}{\kern0pt}\isanewline
\ \ \ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}Nand\ {\isasymphi}\ {\isasympsi}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ envin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ subsetD{\isacharcomma}{\kern0pt}\ rule\ list{\isacharunderscore}{\kern0pt}mono{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ HS{\isacharunderscore}{\kern0pt}iff\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ assms\ Nand\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ map{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ Nand\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ arityle\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymle}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}\ {\isasymand}\ arity{\isacharparenleft}{\kern0pt}{\isasympsi}{\isacharparenright}{\kern0pt}\ {\isasymle}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ conjI{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}{\isachardoublequoteopen}arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymunion}\ arity{\isacharparenleft}{\kern0pt}{\isasympsi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ le{\isacharunderscore}{\kern0pt}trans{\isacharcomma}{\kern0pt}\ rule\ max{\isacharunderscore}{\kern0pt}le{\isadigit{1}}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Nand\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{3}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ j{\isacharequal}{\kern0pt}{\isachardoublequoteopen}arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymunion}\ arity{\isacharparenleft}{\kern0pt}{\isasympsi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ le{\isacharunderscore}{\kern0pt}trans{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Nand\ max{\isacharunderscore}{\kern0pt}le{\isadigit{2}}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}case\isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Nand{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharcomma}{\kern0pt}\ {\isasympsi}{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ {\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymexists}q{\isasymin}M{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ q{\isasympreceq}p\ {\isasymand}\ {\isacharparenleft}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasymphi}\ env{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasympsi}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ ForcesHS{\isacharunderscore}{\kern0pt}Nand\ Nand\ envin\ arityle\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymexists}q{\isasymin}M{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ q{\isasympreceq}p\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasymphi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasympsi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Nand\ arityle\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymexists}q{\isasymin}M{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ {\isasympi}{\isacharbackquote}{\kern0pt}q{\isasympreceq}{\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasymphi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasympi}{\isacharbackquote}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasympsi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ assms\ Nand\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasymnot}{\isacharparenleft}{\kern0pt}{\isasymexists}q{\isasymin}M{\isachardot}{\kern0pt}\ q{\isasymin}P\ {\isasymand}\ q{\isasympreceq}{\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymand}\ {\isacharparenleft}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasymphi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}q\ {\isasymtturnstile}HS\ {\isasympsi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}P\ {\isasymsubseteq}\ M{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ notnot{\isacharunderscore}{\kern0pt}iff{\isacharcomma}{\kern0pt}\ rule\ iffI{\isacharcomma}{\kern0pt}\ clarify{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rename{\isacharunderscore}{\kern0pt}tac\ q{\isacharcomma}{\kern0pt}\ rule{\isacharunderscore}{\kern0pt}tac\ x{\isacharequal}{\kern0pt}{\isachardoublequoteopen}{\isasympi}{\isacharbackquote}{\kern0pt}q{\isachardoublequoteclose}\ \isakeyword{in}\ bexI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ \isanewline
\ \ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ auto{\isacharbrackleft}{\kern0pt}{\isadigit{2}}{\isacharbrackright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rename{\isacharunderscore}{\kern0pt}tac\ q{\isacharcomma}{\kern0pt}\ subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}{\isasymexists}r\ {\isasymin}\ P{\isachardot}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}r\ {\isacharequal}{\kern0pt}\ q{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}{\isasympi}\ {\isasymin}\ surj{\isacharparenleft}{\kern0pt}P{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ surj{\isacharunderscore}{\kern0pt}def\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ is{\isacharunderscore}{\kern0pt}P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}def\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}surj\ transM\ P{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Nand{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharcomma}{\kern0pt}\ {\isasympsi}{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ ForcesHS{\isacharunderscore}{\kern0pt}Nand{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Nand\ mapin\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ assms\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ leq{\isacharcomma}{\kern0pt}\ one{\isacharcomma}{\kern0pt}\ {\isasymlangle}{\isasymF}{\isacharcomma}{\kern0pt}\ {\isasymG}{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}auto{\isasymrangle}{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ env\ {\isasymTurnstile}\ forcesHS{\isacharparenleft}{\kern0pt}Nand{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharcomma}{\kern0pt}\ {\isasympsi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isasympi}\ {\isacharbackquote}{\kern0pt}\ p{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ leq{\isacharcomma}{\kern0pt}\ one{\isacharcomma}{\kern0pt}\ {\isasymlangle}{\isasymF}{\isacharcomma}{\kern0pt}\ {\isasymG}{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}auto{\isasymrangle}{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}a{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymTurnstile}\ forcesHS{\isacharparenleft}{\kern0pt}Nand{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharcomma}{\kern0pt}\ {\isasympsi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{next}\isamarkupfalse%
\isanewline
\ \ \isacommand{case}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}Forall\ {\isasymphi}{\isacharparenright}{\kern0pt}\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ envin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ A{\isacharequal}{\kern0pt}\ {\isachardoublequoteopen}list{\isacharparenleft}{\kern0pt}HS{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ subsetD{\isacharcomma}{\kern0pt}\ rule\ list{\isacharunderscore}{\kern0pt}mono{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ HS{\isacharunderscore}{\kern0pt}iff\ P{\isacharunderscore}{\kern0pt}name{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M\ assms\ Forall\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ mapin\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \ \isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ map{\isacharunderscore}{\kern0pt}type{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ Forall\isanewline
\ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}M{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ arityle\ {\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymle}\ succ{\isacharparenleft}{\kern0pt}length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule{\isacharunderscore}{\kern0pt}tac\ n{\isacharequal}{\kern0pt}{\isachardoublequoteopen}arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{in}\ natE{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ Forall\ \isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\isanewline
\ \ \isacommand{then}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}{\kern0pt}case\ \isanewline
\ \ \isacommand{proof}\isamarkupfalse%
\ {\isacharminus}{\kern0pt}\ \isanewline
\ \ \ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}p\ {\isasymtturnstile}HS\ Forall{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ env\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x\ {\isasymin}\ HS{\isachardot}{\kern0pt}\ p\ {\isasymtturnstile}HS\ {\isasymphi}\ {\isacharbrackleft}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Forall\ ForcesHS{\isacharunderscore}{\kern0pt}Forall\ envin\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x\ {\isasymin}\ HS{\isachardot}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ {\isasymphi}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ Forall\ arityle\ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x\ {\isasymin}\ HS{\isachardot}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ {\isasymphi}\ {\isacharbrackleft}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x\ {\isasymin}\ HS{\isachardot}{\kern0pt}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ {\isasymphi}\ {\isacharbrackleft}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iffI{\isacharcomma}{\kern0pt}\ rule\ ballI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rename{\isacharunderscore}{\kern0pt}tac\ x{\isacharcomma}{\kern0pt}\ subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}{\isasymexists}y\ {\isasymin}\ P{\isacharunderscore}{\kern0pt}names{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}y\ {\isacharequal}{\kern0pt}\ x{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ clarify\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ HS{\isacharunderscore}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto\ assms\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rename{\isacharunderscore}{\kern0pt}tac\ x{\isacharcomma}{\kern0pt}\ subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isasymin}\ bij{\isacharparenleft}{\kern0pt}P{\isacharunderscore}{\kern0pt}names{\isacharcomma}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}names{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\ \isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ bij{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}surj\ surj{\isacharunderscore}{\kern0pt}def\ HS{\isacharunderscore}{\kern0pt}iff\ \isanewline
\ \ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}bij{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ \isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ simp\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ ballI{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rename{\isacharunderscore}{\kern0pt}tac\ x{\isacharcomma}{\kern0pt}\ subgoal{\isacharunderscore}{\kern0pt}tac\ {\isachardoublequoteopen}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x\ {\isasymin}\ HS{\isachardoublequoteclose}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
\ force\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iffD{\isadigit{1}}{\isacharcomma}{\kern0pt}\ rule\ HS{\isacharunderscore}{\kern0pt}Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms\ HS{\isacharunderscore}{\kern0pt}iff\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{also}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasympi}{\isacharbackquote}{\kern0pt}p\ {\isasymtturnstile}HS\ Forall{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}{\isacharbackquote}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isanewline
\ \ \ \ \ \ \isacommand{apply}\isamarkupfalse%
{\isacharparenleft}{\kern0pt}rule\ iff{\isacharunderscore}{\kern0pt}flip{\isacharcomma}{\kern0pt}\ rule\ ForcesHS{\isacharunderscore}{\kern0pt}Forall{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ \ \ \isacommand{using}\isamarkupfalse%
\ P{\isacharunderscore}{\kern0pt}auto{\isacharunderscore}{\kern0pt}value\ Forall\ assms\ mapin\ \isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ auto\isanewline
\ \ \ \ \isacommand{finally}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}p{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ leq{\isacharcomma}{\kern0pt}\ one{\isacharcomma}{\kern0pt}\ {\isasymlangle}{\isasymF}{\isacharcomma}{\kern0pt}\ {\isasymG}{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}auto{\isasymrangle}{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ env\ {\isasymTurnstile}\ forcesHS{\isacharparenleft}{\kern0pt}Forall{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isasympi}\ {\isacharbackquote}{\kern0pt}\ p{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ leq{\isacharcomma}{\kern0pt}\ one{\isacharcomma}{\kern0pt}\ {\isasymlangle}{\isasymF}{\isacharcomma}{\kern0pt}\ {\isasymG}{\isacharcomma}{\kern0pt}\ P{\isacharcomma}{\kern0pt}\ P{\isacharunderscore}{\kern0pt}auto{\isasymrangle}{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ map{\isacharparenleft}{\kern0pt}{\isasymlambda}x{\isachardot}{\kern0pt}\ Pn{\isacharunderscore}{\kern0pt}auto{\isacharparenleft}{\kern0pt}{\isasympi}{\isacharparenright}{\kern0pt}\ {\isacharbackquote}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymTurnstile}\ forcesHS{\isacharparenleft}{\kern0pt}Forall{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ \isacommand{by}\isamarkupfalse%
\ simp\isanewline
\ \ \isacommand{qed}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\ \isanewline
%
\endisadelimproof
\isanewline
\isacommand{end}\isamarkupfalse%
\isanewline
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/source/repos/ZF-notAC/code/Symmetry_Lemma.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%14=4%:%
%:%15=5%:%
%:%20=5%:%
%:%23=6%:%
%:%24=7%:%
%:%25=7%:%
%:%26=8%:%
%:%27=9%:%
%:%28=10%:%
%:%29=10%:%
%:%30=11%:%
%:%32=13%:%
%:%39=14%:%
%:%40=14%:%
%:%41=15%:%
%:%42=15%:%
%:%43=16%:%
%:%44=16%:%
%:%45=17%:%
%:%46=18%:%
%:%47=18%:%
%:%48=19%:%
%:%49=19%:%
%:%50=20%:%
%:%51=20%:%
%:%52=21%:%
%:%53=22%:%
%:%54=22%:%
%:%55=23%:%
%:%56=23%:%
%:%57=24%:%
%:%58=24%:%
%:%59=25%:%
%:%60=25%:%
%:%61=26%:%
%:%62=26%:%
%:%63=27%:%
%:%64=27%:%
%:%65=28%:%
%:%66=29%:%
%:%67=30%:%
%:%68=31%:%
%:%69=31%:%
%:%70=31%:%
%:%71=31%:%
%:%72=32%:%
%:%73=33%:%
%:%74=33%:%
%:%75=34%:%
%:%76=34%:%
%:%77=35%:%
%:%78=35%:%
%:%79=36%:%
%:%80=36%:%
%:%81=37%:%
%:%82=37%:%
%:%83=37%:%
%:%84=38%:%
%:%85=38%:%
%:%86=39%:%
%:%87=39%:%
%:%88=40%:%
%:%89=40%:%
%:%90=41%:%
%:%91=41%:%
%:%92=41%:%
%:%93=42%:%
%:%94=42%:%
%:%95=43%:%
%:%96=43%:%
%:%97=44%:%
%:%98=44%:%
%:%99=45%:%
%:%100=45%:%
%:%101=46%:%
%:%102=46%:%
%:%103=47%:%
%:%104=47%:%
%:%105=48%:%
%:%106=48%:%
%:%107=49%:%
%:%108=49%:%
%:%109=50%:%
%:%110=50%:%
%:%111=51%:%
%:%112=51%:%
%:%113=52%:%
%:%114=52%:%
%:%115=53%:%
%:%116=53%:%
%:%117=54%:%
%:%118=54%:%
%:%119=54%:%
%:%120=55%:%
%:%121=55%:%
%:%122=55%:%
%:%123=55%:%
%:%124=55%:%
%:%125=56%:%
%:%126=56%:%
%:%127=57%:%
%:%128=57%:%
%:%129=58%:%
%:%130=58%:%
%:%131=59%:%
%:%132=59%:%
%:%133=60%:%
%:%134=60%:%
%:%135=61%:%
%:%136=61%:%
%:%137=62%:%
%:%138=62%:%
%:%139=63%:%
%:%140=63%:%
%:%141=63%:%
%:%142=63%:%
%:%143=64%:%
%:%144=64%:%
%:%145=64%:%
%:%146=65%:%
%:%147=65%:%
%:%148=66%:%
%:%149=66%:%
%:%150=67%:%
%:%151=67%:%
%:%152=68%:%
%:%153=68%:%
%:%154=69%:%
%:%155=69%:%
%:%156=70%:%
%:%157=70%:%
%:%158=71%:%
%:%159=71%:%
%:%160=72%:%
%:%161=72%:%
%:%162=73%:%
%:%163=73%:%
%:%164=74%:%
%:%165=74%:%
%:%166=75%:%
%:%167=75%:%
%:%168=76%:%
%:%169=76%:%
%:%170=77%:%
%:%171=77%:%
%:%172=78%:%
%:%173=78%:%
%:%174=79%:%
%:%175=79%:%
%:%176=80%:%
%:%177=80%:%
%:%178=81%:%
%:%179=81%:%
%:%180=82%:%
%:%181=82%:%
%:%182=83%:%
%:%183=83%:%
%:%184=84%:%
%:%185=84%:%
%:%186=85%:%
%:%187=85%:%
%:%188=86%:%
%:%189=86%:%
%:%190=86%:%
%:%191=87%:%
%:%192=87%:%
%:%193=88%:%
%:%194=88%:%
%:%195=89%:%
%:%196=89%:%
%:%197=90%:%
%:%198=90%:%
%:%199=91%:%
%:%200=91%:%
%:%201=92%:%
%:%202=92%:%
%:%203=93%:%
%:%204=93%:%
%:%205=94%:%
%:%206=94%:%
%:%207=95%:%
%:%208=95%:%
%:%209=96%:%
%:%210=96%:%
%:%211=97%:%
%:%212=97%:%
%:%213=98%:%
%:%214=98%:%
%:%215=99%:%
%:%216=99%:%
%:%217=100%:%
%:%218=100%:%
%:%219=101%:%
%:%220=101%:%
%:%221=102%:%
%:%222=102%:%
%:%223=103%:%
%:%224=103%:%
%:%225=104%:%
%:%226=104%:%
%:%227=105%:%
%:%228=105%:%
%:%229=106%:%
%:%230=106%:%
%:%231=107%:%
%:%232=107%:%
%:%233=107%:%
%:%234=108%:%
%:%235=108%:%
%:%236=108%:%
%:%237=108%:%
%:%238=108%:%
%:%239=109%:%
%:%240=109%:%
%:%241=110%:%
%:%242=111%:%
%:%243=111%:%
%:%244=111%:%
%:%245=111%:%
%:%246=112%:%
%:%247=112%:%
%:%248=113%:%
%:%249=113%:%
%:%250=114%:%
%:%251=114%:%
%:%252=115%:%
%:%253=115%:%
%:%254=116%:%
%:%255=116%:%
%:%256=116%:%
%:%257=116%:%
%:%258=117%:%
%:%259=118%:%
%:%260=118%:%
%:%261=119%:%
%:%262=119%:%
%:%263=119%:%
%:%264=119%:%
%:%265=120%:%
%:%266=120%:%
%:%267=120%:%
%:%268=120%:%
%:%269=120%:%
%:%270=120%:%
%:%271=121%:%
%:%272=122%:%
%:%273=122%:%
%:%274=123%:%
%:%275=123%:%
%:%276=124%:%
%:%277=124%:%
%:%278=125%:%
%:%279=125%:%
%:%280=126%:%
%:%281=126%:%
%:%282=127%:%
%:%283=127%:%
%:%284=127%:%
%:%285=127%:%
%:%286=127%:%
%:%287=128%:%
%:%288=129%:%
%:%289=129%:%
%:%290=129%:%
%:%291=129%:%
%:%292=130%:%
%:%293=131%:%
%:%294=131%:%
%:%295=131%:%
%:%296=131%:%
%:%297=132%:%
%:%298=133%:%
%:%299=133%:%
%:%300=133%:%
%:%301=134%:%
%:%302=134%:%
%:%303=135%:%
%:%304=135%:%
%:%305=136%:%
%:%306=136%:%
%:%307=137%:%
%:%308=137%:%
%:%309=138%:%
%:%310=138%:%
%:%311=139%:%
%:%312=139%:%
%:%313=140%:%
%:%314=140%:%
%:%315=141%:%
%:%316=141%:%
%:%317=142%:%
%:%318=142%:%
%:%319=143%:%
%:%320=143%:%
%:%321=144%:%
%:%322=144%:%
%:%323=145%:%
%:%324=145%:%
%:%325=146%:%
%:%326=146%:%
%:%327=147%:%
%:%328=147%:%
%:%329=148%:%
%:%330=148%:%
%:%331=149%:%
%:%332=149%:%
%:%333=150%:%
%:%334=150%:%
%:%335=151%:%
%:%336=151%:%
%:%337=152%:%
%:%338=152%:%
%:%339=153%:%
%:%340=153%:%
%:%341=154%:%
%:%342=154%:%
%:%343=155%:%
%:%344=155%:%
%:%345=156%:%
%:%346=156%:%
%:%347=157%:%
%:%348=157%:%
%:%349=158%:%
%:%350=158%:%
%:%351=159%:%
%:%352=159%:%
%:%353=160%:%
%:%354=160%:%
%:%355=161%:%
%:%356=161%:%
%:%357=162%:%
%:%358=162%:%
%:%359=163%:%
%:%360=163%:%
%:%361=164%:%
%:%362=164%:%
%:%363=165%:%
%:%364=165%:%
%:%365=166%:%
%:%366=166%:%
%:%367=167%:%
%:%368=167%:%
%:%369=168%:%
%:%370=168%:%
%:%371=169%:%
%:%372=169%:%
%:%373=170%:%
%:%374=170%:%
%:%375=171%:%
%:%376=171%:%
%:%377=172%:%
%:%378=172%:%
%:%379=173%:%
%:%380=173%:%
%:%381=174%:%
%:%382=174%:%
%:%383=175%:%
%:%384=175%:%
%:%385=176%:%
%:%386=176%:%
%:%387=177%:%
%:%388=177%:%
%:%389=178%:%
%:%390=178%:%
%:%391=179%:%
%:%392=179%:%
%:%393=180%:%
%:%394=180%:%
%:%395=180%:%
%:%396=180%:%
%:%397=180%:%
%:%398=181%:%
%:%399=181%:%
%:%400=182%:%
%:%401=182%:%
%:%402=182%:%
%:%403=183%:%
%:%404=183%:%
%:%405=184%:%
%:%406=184%:%
%:%407=185%:%
%:%408=185%:%
%:%409=186%:%
%:%410=186%:%
%:%411=187%:%
%:%412=187%:%
%:%413=187%:%
%:%414=187%:%
%:%415=187%:%
%:%416=188%:%
%:%417=188%:%
%:%418=189%:%
%:%419=190%:%
%:%420=190%:%
%:%421=191%:%
%:%422=191%:%
%:%423=191%:%
%:%424=192%:%
%:%425=192%:%
%:%426=193%:%
%:%427=193%:%
%:%428=194%:%
%:%429=194%:%
%:%430=195%:%
%:%431=196%:%
%:%432=197%:%
%:%433=198%:%
%:%434=199%:%
%:%435=199%:%
%:%436=199%:%
%:%437=200%:%
%:%438=201%:%
%:%439=201%:%
%:%440=202%:%
%:%441=203%:%
%:%442=203%:%
%:%443=204%:%
%:%444=204%:%
%:%445=205%:%
%:%446=205%:%
%:%447=206%:%
%:%448=206%:%
%:%449=207%:%
%:%450=207%:%
%:%451=208%:%
%:%452=208%:%
%:%453=209%:%
%:%454=209%:%
%:%455=210%:%
%:%456=210%:%
%:%457=211%:%
%:%458=211%:%
%:%459=212%:%
%:%460=212%:%
%:%461=213%:%
%:%462=213%:%
%:%463=214%:%
%:%464=214%:%
%:%465=215%:%
%:%466=215%:%
%:%467=216%:%
%:%468=216%:%
%:%469=217%:%
%:%470=217%:%
%:%471=218%:%
%:%472=218%:%
%:%473=219%:%
%:%474=219%:%
%:%475=220%:%
%:%476=220%:%
%:%477=221%:%
%:%478=221%:%
%:%479=222%:%
%:%480=222%:%
%:%481=223%:%
%:%482=223%:%
%:%483=224%:%
%:%484=224%:%
%:%485=225%:%
%:%486=226%:%
%:%487=226%:%
%:%488=227%:%
%:%489=227%:%
%:%490=227%:%
%:%491=228%:%
%:%492=228%:%
%:%493=228%:%
%:%495=230%:%
%:%496=231%:%
%:%497=231%:%
%:%498=232%:%
%:%499=232%:%
%:%500=233%:%
%:%501=233%:%
%:%502=233%:%
%:%503=234%:%
%:%504=235%:%
%:%505=236%:%
%:%506=237%:%
%:%507=237%:%
%:%508=238%:%
%:%509=238%:%
%:%510=238%:%
%:%511=238%:%
%:%512=238%:%
%:%513=238%:%
%:%514=239%:%
%:%515=239%:%
%:%516=239%:%
%:%517=240%:%
%:%518=240%:%
%:%519=241%:%
%:%520=241%:%
%:%521=242%:%
%:%522=242%:%
%:%523=243%:%
%:%524=244%:%
%:%525=244%:%
%:%526=245%:%
%:%527=245%:%
%:%528=246%:%
%:%529=246%:%
%:%530=247%:%
%:%531=247%:%
%:%532=248%:%
%:%533=248%:%
%:%534=249%:%
%:%535=249%:%
%:%536=250%:%
%:%537=250%:%
%:%538=251%:%
%:%539=251%:%
%:%540=252%:%
%:%541=252%:%
%:%542=253%:%
%:%543=253%:%
%:%544=254%:%
%:%545=254%:%
%:%546=255%:%
%:%547=255%:%
%:%548=255%:%
%:%549=256%:%
%:%550=256%:%
%:%551=256%:%
%:%552=256%:%
%:%553=257%:%
%:%554=258%:%
%:%555=258%:%
%:%556=259%:%
%:%557=259%:%
%:%558=260%:%
%:%559=260%:%
%:%560=260%:%
%:%561=261%:%
%:%562=261%:%
%:%563=261%:%
%:%564=261%:%
%:%565=262%:%
%:%566=262%:%
%:%567=262%:%
%:%568=263%:%
%:%569=263%:%
%:%570=263%:%
%:%571=264%:%
%:%572=264%:%
%:%573=264%:%
%:%574=265%:%
%:%575=265%:%
%:%576=266%:%
%:%577=266%:%
%:%578=267%:%
%:%579=267%:%
%:%580=268%:%
%:%581=268%:%
%:%582=269%:%
%:%583=269%:%
%:%584=269%:%
%:%585=269%:%
%:%586=270%:%
%:%587=270%:%
%:%588=270%:%
%:%589=271%:%
%:%590=271%:%
%:%591=272%:%
%:%592=272%:%
%:%593=273%:%
%:%594=273%:%
%:%595=274%:%
%:%596=274%:%
%:%597=275%:%
%:%598=275%:%
%:%599=276%:%
%:%600=276%:%
%:%601=277%:%
%:%602=277%:%
%:%603=278%:%
%:%604=278%:%
%:%605=279%:%
%:%606=279%:%
%:%607=280%:%
%:%608=280%:%
%:%609=281%:%
%:%610=281%:%
%:%611=282%:%
%:%612=282%:%
%:%613=283%:%
%:%614=283%:%
%:%615=284%:%
%:%616=284%:%
%:%617=285%:%
%:%618=285%:%
%:%619=286%:%
%:%620=286%:%
%:%621=287%:%
%:%622=287%:%
%:%623=288%:%
%:%624=288%:%
%:%625=289%:%
%:%626=289%:%
%:%627=290%:%
%:%628=290%:%
%:%629=291%:%
%:%630=291%:%
%:%631=292%:%
%:%632=292%:%
%:%633=292%:%
%:%634=292%:%
%:%635=292%:%
%:%636=293%:%
%:%637=293%:%
%:%638=293%:%
%:%639=293%:%
%:%640=294%:%
%:%641=294%:%
%:%642=295%:%
%:%643=296%:%
%:%644=296%:%
%:%645=297%:%
%:%646=297%:%
%:%647=297%:%
%:%648=298%:%
%:%649=298%:%
%:%650=298%:%
%:%651=299%:%
%:%652=300%:%
%:%653=300%:%
%:%654=300%:%
%:%655=301%:%
%:%656=301%:%
%:%657=301%:%
%:%658=302%:%
%:%659=303%:%
%:%660=303%:%
%:%661=304%:%
%:%662=304%:%
%:%663=304%:%
%:%664=305%:%
%:%665=305%:%
%:%666=305%:%
%:%667=306%:%
%:%668=306%:%
%:%669=307%:%
%:%670=307%:%
%:%671=308%:%
%:%672=308%:%
%:%673=309%:%
%:%674=309%:%
%:%675=310%:%
%:%676=310%:%
%:%677=311%:%
%:%678=311%:%
%:%679=311%:%
%:%680=312%:%
%:%681=312%:%
%:%682=312%:%
%:%683=313%:%
%:%684=313%:%
%:%685=313%:%
%:%686=314%:%
%:%687=314%:%
%:%688=315%:%
%:%689=315%:%
%:%690=316%:%
%:%691=316%:%
%:%692=317%:%
%:%693=317%:%
%:%694=318%:%
%:%695=318%:%
%:%696=319%:%
%:%697=319%:%
%:%698=319%:%
%:%699=319%:%
%:%700=319%:%
%:%701=320%:%
%:%702=320%:%
%:%703=320%:%
%:%704=320%:%
%:%705=321%:%
%:%706=321%:%
%:%707=322%:%
%:%708=322%:%
%:%709=323%:%
%:%710=323%:%
%:%711=324%:%
%:%712=325%:%
%:%713=326%:%
%:%714=327%:%
%:%715=328%:%
%:%716=328%:%
%:%717=328%:%
%:%718=328%:%
%:%719=329%:%
%:%720=330%:%
%:%721=330%:%
%:%722=331%:%
%:%723=331%:%
%:%724=332%:%
%:%725=332%:%
%:%726=332%:%
%:%727=333%:%
%:%728=333%:%
%:%729=333%:%
%:%730=333%:%
%:%731=333%:%
%:%732=334%:%
%:%733=334%:%
%:%734=334%:%
%:%735=335%:%
%:%736=335%:%
%:%737=336%:%
%:%738=336%:%
%:%739=337%:%
%:%740=337%:%
%:%741=337%:%
%:%742=338%:%
%:%743=338%:%
%:%744=339%:%
%:%745=339%:%
%:%746=340%:%
%:%747=340%:%
%:%748=340%:%
%:%749=340%:%
%:%750=341%:%
%:%751=341%:%
%:%752=342%:%
%:%753=343%:%
%:%754=343%:%
%:%755=344%:%
%:%756=344%:%
%:%757=345%:%
%:%758=345%:%
%:%759=346%:%
%:%760=346%:%
%:%761=347%:%
%:%762=347%:%
%:%763=348%:%
%:%764=348%:%
%:%765=349%:%
%:%766=349%:%
%:%767=350%:%
%:%768=350%:%
%:%769=351%:%
%:%770=351%:%
%:%771=352%:%
%:%772=352%:%
%:%773=353%:%
%:%774=353%:%
%:%775=354%:%
%:%776=354%:%
%:%777=355%:%
%:%778=355%:%
%:%779=356%:%
%:%780=356%:%
%:%781=357%:%
%:%782=358%:%
%:%783=358%:%
%:%784=359%:%
%:%785=359%:%
%:%786=359%:%
%:%787=360%:%
%:%788=361%:%
%:%789=361%:%
%:%790=362%:%
%:%791=362%:%
%:%792=363%:%
%:%793=363%:%
%:%794=364%:%
%:%795=364%:%
%:%796=365%:%
%:%797=365%:%
%:%798=366%:%
%:%799=366%:%
%:%800=367%:%
%:%801=367%:%
%:%802=368%:%
%:%803=368%:%
%:%804=369%:%
%:%805=369%:%
%:%806=370%:%
%:%807=370%:%
%:%808=371%:%
%:%809=371%:%
%:%810=372%:%
%:%811=372%:%
%:%812=372%:%
%:%813=373%:%
%:%814=373%:%
%:%815=373%:%
%:%816=374%:%
%:%817=374%:%
%:%818=374%:%
%:%819=375%:%
%:%820=375%:%
%:%821=376%:%
%:%822=376%:%
%:%823=377%:%
%:%824=377%:%
%:%825=378%:%
%:%826=378%:%
%:%827=379%:%
%:%828=379%:%
%:%829=380%:%
%:%830=380%:%
%:%831=381%:%
%:%832=381%:%
%:%833=382%:%
%:%834=382%:%
%:%835=383%:%
%:%836=383%:%
%:%837=384%:%
%:%838=384%:%
%:%839=385%:%
%:%840=385%:%
%:%841=385%:%
%:%842=385%:%
%:%843=386%:%
%:%844=386%:%
%:%845=387%:%
%:%846=387%:%
%:%847=387%:%
%:%848=388%:%
%:%849=388%:%
%:%850=389%:%
%:%851=389%:%
%:%852=390%:%
%:%853=390%:%
%:%854=391%:%
%:%855=391%:%
%:%856=392%:%
%:%857=392%:%
%:%858=392%:%
%:%859=393%:%
%:%860=393%:%
%:%861=393%:%
%:%862=394%:%
%:%863=394%:%
%:%864=395%:%
%:%865=396%:%
%:%866=396%:%
%:%867=397%:%
%:%868=397%:%
%:%869=398%:%
%:%870=398%:%
%:%871=399%:%
%:%872=399%:%
%:%873=400%:%
%:%874=400%:%
%:%875=400%:%
%:%876=401%:%
%:%877=402%:%
%:%878=402%:%
%:%879=402%:%
%:%880=403%:%
%:%881=403%:%
%:%882=404%:%
%:%883=404%:%
%:%884=405%:%
%:%885=405%:%
%:%886=406%:%
%:%887=406%:%
%:%888=407%:%
%:%889=407%:%
%:%890=407%:%
%:%891=408%:%
%:%892=408%:%
%:%893=409%:%
%:%894=409%:%
%:%895=410%:%
%:%896=410%:%
%:%897=411%:%
%:%898=411%:%
%:%899=412%:%
%:%900=412%:%
%:%901=412%:%
%:%902=413%:%
%:%903=413%:%
%:%904=414%:%
%:%905=414%:%
%:%906=415%:%
%:%907=415%:%
%:%908=416%:%
%:%909=416%:%
%:%910=417%:%
%:%911=417%:%
%:%912=418%:%
%:%913=418%:%
%:%914=419%:%
%:%915=419%:%
%:%916=420%:%
%:%917=420%:%
%:%918=420%:%
%:%919=421%:%
%:%920=421%:%
%:%921=422%:%
%:%922=422%:%
%:%923=423%:%
%:%924=423%:%
%:%925=424%:%
%:%926=424%:%
%:%927=425%:%
%:%928=425%:%
%:%929=425%:%
%:%930=425%:%
%:%931=426%:%
%:%932=426%:%
%:%933=426%:%
%:%934=427%:%
%:%935=427%:%
%:%936=428%:%
%:%937=428%:%
%:%938=429%:%
%:%939=429%:%
%:%940=430%:%
%:%941=430%:%
%:%942=431%:%
%:%943=431%:%
%:%944=432%:%
%:%945=432%:%
%:%946=433%:%
%:%947=433%:%
%:%948=434%:%
%:%949=434%:%
%:%950=435%:%
%:%951=435%:%
%:%952=436%:%
%:%953=436%:%
%:%954=436%:%
%:%955=437%:%
%:%956=437%:%
%:%957=437%:%
%:%958=438%:%
%:%959=438%:%
%:%960=439%:%
%:%961=440%:%
%:%962=440%:%
%:%963=440%:%
%:%964=441%:%
%:%965=442%:%
%:%966=442%:%
%:%967=443%:%
%:%968=443%:%
%:%969=444%:%
%:%970=444%:%
%:%971=445%:%
%:%972=445%:%
%:%973=445%:%
%:%974=446%:%
%:%975=447%:%
%:%976=447%:%
%:%977=448%:%
%:%978=448%:%
%:%979=449%:%
%:%980=449%:%
%:%981=450%:%
%:%982=450%:%
%:%983=451%:%
%:%984=451%:%
%:%985=452%:%
%:%986=452%:%
%:%987=453%:%
%:%988=453%:%
%:%989=454%:%
%:%990=454%:%
%:%991=455%:%
%:%992=455%:%
%:%993=456%:%
%:%994=456%:%
%:%995=457%:%
%:%996=457%:%
%:%997=458%:%
%:%998=458%:%
%:%999=459%:%
%:%1000=459%:%
%:%1001=460%:%
%:%1002=460%:%
%:%1003=461%:%
%:%1004=461%:%
%:%1005=462%:%
%:%1006=462%:%
%:%1007=463%:%
%:%1008=463%:%
%:%1009=464%:%
%:%1010=465%:%
%:%1011=465%:%
%:%1012=466%:%
%:%1013=466%:%
%:%1014=466%:%
%:%1015=467%:%
%:%1016=467%:%
%:%1017=468%:%
%:%1018=468%:%
%:%1019=468%:%
%:%1020=468%:%
%:%1021=468%:%
%:%1022=468%:%
%:%1023=469%:%
%:%1024=469%:%
%:%1025=470%:%
%:%1026=470%:%
%:%1027=470%:%
%:%1028=470%:%
%:%1029=470%:%
%:%1030=470%:%
%:%1031=471%:%
%:%1032=472%:%
%:%1033=472%:%
%:%1034=473%:%
%:%1035=474%:%
%:%1036=474%:%
%:%1037=474%:%
%:%1038=474%:%
%:%1039=475%:%
%:%1045=475%:%
%:%1048=476%:%
%:%1049=477%:%
%:%1050=478%:%
%:%1051=478%:%
%:%1052=479%:%
%:%1053=480%:%
%:%1054=481%:%
%:%1061=482%:%
%:%1062=482%:%
%:%1063=483%:%
%:%1064=483%:%
%:%1065=484%:%
%:%1066=485%:%
%:%1067=485%:%
%:%1068=485%:%
%:%1069=486%:%
%:%1070=487%:%
%:%1071=487%:%
%:%1072=488%:%
%:%1073=488%:%
%:%1074=489%:%
%:%1075=489%:%
%:%1076=490%:%
%:%1077=490%:%
%:%1078=491%:%
%:%1079=492%:%
%:%1080=492%:%
%:%1081=493%:%
%:%1082=493%:%
%:%1083=494%:%
%:%1084=494%:%
%:%1085=495%:%
%:%1086=495%:%
%:%1087=496%:%
%:%1088=496%:%
%:%1089=497%:%
%:%1090=497%:%
%:%1091=498%:%
%:%1092=498%:%
%:%1093=499%:%
%:%1094=500%:%
%:%1095=500%:%
%:%1096=501%:%
%:%1097=501%:%
%:%1098=502%:%
%:%1099=502%:%
%:%1100=503%:%
%:%1101=503%:%
%:%1102=504%:%
%:%1103=505%:%
%:%1104=505%:%
%:%1105=506%:%
%:%1106=506%:%
%:%1107=507%:%
%:%1108=507%:%
%:%1109=508%:%
%:%1110=508%:%
%:%1111=509%:%
%:%1112=509%:%
%:%1113=509%:%
%:%1114=510%:%
%:%1115=510%:%
%:%1116=511%:%
%:%1117=511%:%
%:%1118=512%:%
%:%1119=512%:%
%:%1120=513%:%
%:%1121=513%:%
%:%1122=513%:%
%:%1123=514%:%
%:%1124=514%:%
%:%1125=515%:%
%:%1126=515%:%
%:%1127=516%:%
%:%1128=516%:%
%:%1129=516%:%
%:%1130=517%:%
%:%1131=517%:%
%:%1132=518%:%
%:%1133=518%:%
%:%1134=519%:%
%:%1135=519%:%
%:%1136=519%:%
%:%1137=520%:%
%:%1138=520%:%
%:%1139=521%:%
%:%1140=521%:%
%:%1141=522%:%
%:%1142=522%:%
%:%1143=523%:%
%:%1144=523%:%
%:%1145=523%:%
%:%1146=524%:%
%:%1147=524%:%
%:%1148=525%:%
%:%1149=525%:%
%:%1150=526%:%
%:%1151=526%:%
%:%1152=527%:%
%:%1153=527%:%
%:%1154=528%:%
%:%1155=528%:%
%:%1156=529%:%
%:%1157=529%:%
%:%1158=530%:%
%:%1159=530%:%
%:%1160=531%:%
%:%1161=531%:%
%:%1162=532%:%
%:%1163=532%:%
%:%1164=533%:%
%:%1165=533%:%
%:%1166=533%:%
%:%1167=534%:%
%:%1168=534%:%
%:%1169=535%:%
%:%1175=535%:%
%:%1178=536%:%
%:%1179=537%:%
%:%1180=537%:%
%:%1181=538%:%
%:%1182=539%:%
%:%1183=540%:%
%:%1190=541%:%
%:%1191=541%:%
%:%1192=542%:%
%:%1193=542%:%
%:%1194=543%:%
%:%1195=544%:%
%:%1196=544%:%
%:%1197=544%:%
%:%1198=545%:%
%:%1199=546%:%
%:%1200=546%:%
%:%1201=547%:%
%:%1202=547%:%
%:%1203=548%:%
%:%1204=548%:%
%:%1205=549%:%
%:%1206=549%:%
%:%1207=550%:%
%:%1208=551%:%
%:%1209=551%:%
%:%1210=552%:%
%:%1211=552%:%
%:%1212=553%:%
%:%1213=553%:%
%:%1214=554%:%
%:%1215=554%:%
%:%1216=555%:%
%:%1217=555%:%
%:%1218=556%:%
%:%1219=556%:%
%:%1220=557%:%
%:%1221=557%:%
%:%1222=558%:%
%:%1223=559%:%
%:%1224=559%:%
%:%1225=560%:%
%:%1226=560%:%
%:%1227=561%:%
%:%1228=561%:%
%:%1229=562%:%
%:%1230=562%:%
%:%1231=563%:%
%:%1232=564%:%
%:%1233=564%:%
%:%1234=565%:%
%:%1235=565%:%
%:%1236=566%:%
%:%1237=566%:%
%:%1238=567%:%
%:%1239=567%:%
%:%1240=568%:%
%:%1241=568%:%
%:%1242=568%:%
%:%1243=569%:%
%:%1244=569%:%
%:%1245=570%:%
%:%1246=570%:%
%:%1247=571%:%
%:%1248=571%:%
%:%1249=572%:%
%:%1250=572%:%
%:%1251=572%:%
%:%1252=573%:%
%:%1253=573%:%
%:%1254=574%:%
%:%1255=574%:%
%:%1256=575%:%
%:%1257=575%:%
%:%1258=575%:%
%:%1259=576%:%
%:%1260=576%:%
%:%1261=577%:%
%:%1262=577%:%
%:%1263=578%:%
%:%1264=578%:%
%:%1265=578%:%
%:%1266=579%:%
%:%1267=579%:%
%:%1268=580%:%
%:%1269=580%:%
%:%1270=581%:%
%:%1271=581%:%
%:%1272=582%:%
%:%1273=582%:%
%:%1274=582%:%
%:%1275=583%:%
%:%1276=583%:%
%:%1277=584%:%
%:%1278=584%:%
%:%1279=585%:%
%:%1280=585%:%
%:%1281=586%:%
%:%1282=586%:%
%:%1283=587%:%
%:%1284=587%:%
%:%1285=588%:%
%:%1286=588%:%
%:%1287=589%:%
%:%1288=589%:%
%:%1289=590%:%
%:%1290=590%:%
%:%1291=591%:%
%:%1292=591%:%
%:%1293=592%:%
%:%1294=592%:%
%:%1295=592%:%
%:%1296=593%:%
%:%1297=593%:%
%:%1298=594%:%
%:%1304=594%:%
%:%1307=595%:%
%:%1308=596%:%
%:%1309=596%:%
%:%1310=597%:%
%:%1311=598%:%
%:%1312=599%:%
%:%1315=600%:%
%:%1319=600%:%
%:%1320=600%:%
%:%1321=601%:%
%:%1322=601%:%
%:%1323=602%:%
%:%1324=602%:%
%:%1325=603%:%
%:%1326=603%:%
%:%1327=603%:%
%:%1328=604%:%
%:%1329=604%:%
%:%1330=605%:%
%:%1331=605%:%
%:%1332=606%:%
%:%1333=606%:%
%:%1334=607%:%
%:%1335=607%:%
%:%1336=608%:%
%:%1337=608%:%
%:%1338=609%:%
%:%1339=609%:%
%:%1340=610%:%
%:%1341=610%:%
%:%1342=611%:%
%:%1343=611%:%
%:%1344=612%:%
%:%1345=612%:%
%:%1346=612%:%
%:%1347=613%:%
%:%1348=613%:%
%:%1349=614%:%
%:%1350=614%:%
%:%1351=615%:%
%:%1352=615%:%
%:%1353=616%:%
%:%1354=616%:%
%:%1355=617%:%
%:%1356=617%:%
%:%1357=618%:%
%:%1358=618%:%
%:%1359=619%:%
%:%1360=619%:%
%:%1361=620%:%
%:%1362=620%:%
%:%1363=621%:%
%:%1364=622%:%
%:%1365=622%:%
%:%1366=623%:%
%:%1367=623%:%
%:%1368=624%:%
%:%1369=624%:%
%:%1370=625%:%
%:%1371=625%:%
%:%1372=626%:%
%:%1373=626%:%
%:%1374=627%:%
%:%1375=627%:%
%:%1376=628%:%
%:%1377=628%:%
%:%1378=629%:%
%:%1379=629%:%
%:%1380=630%:%
%:%1381=630%:%
%:%1382=631%:%
%:%1383=631%:%
%:%1384=632%:%
%:%1385=632%:%
%:%1386=633%:%
%:%1387=634%:%
%:%1388=634%:%
%:%1389=635%:%
%:%1390=635%:%
%:%1391=636%:%
%:%1392=636%:%
%:%1393=637%:%
%:%1394=637%:%
%:%1395=638%:%
%:%1396=638%:%
%:%1397=639%:%
%:%1398=639%:%
%:%1399=640%:%
%:%1400=640%:%
%:%1401=641%:%
%:%1402=642%:%
%:%1403=642%:%
%:%1404=642%:%
%:%1405=643%:%
%:%1406=643%:%
%:%1407=644%:%
%:%1408=644%:%
%:%1409=645%:%
%:%1410=645%:%
%:%1411=646%:%
%:%1412=646%:%
%:%1413=647%:%
%:%1414=647%:%
%:%1415=647%:%
%:%1416=648%:%
%:%1417=648%:%
%:%1418=648%:%
%:%1419=649%:%
%:%1420=649%:%
%:%1421=649%:%
%:%1422=650%:%
%:%1423=650%:%
%:%1424=650%:%
%:%1425=651%:%
%:%1426=651%:%
%:%1427=651%:%
%:%1428=652%:%
%:%1429=652%:%
%:%1430=653%:%
%:%1431=653%:%
%:%1432=654%:%
%:%1433=654%:%
%:%1434=655%:%
%:%1435=655%:%
%:%1436=656%:%
%:%1437=656%:%
%:%1438=657%:%
%:%1439=657%:%
%:%1440=658%:%
%:%1441=658%:%
%:%1442=659%:%
%:%1443=659%:%
%:%1444=660%:%
%:%1445=660%:%
%:%1446=661%:%
%:%1447=661%:%
%:%1448=662%:%
%:%1449=662%:%
%:%1450=663%:%
%:%1451=663%:%
%:%1452=664%:%
%:%1453=664%:%
%:%1454=665%:%
%:%1455=665%:%
%:%1456=665%:%
%:%1457=666%:%
%:%1458=666%:%
%:%1459=667%:%
%:%1460=667%:%
%:%1461=668%:%
%:%1462=668%:%
%:%1463=669%:%
%:%1464=669%:%
%:%1465=669%:%
%:%1466=670%:%
%:%1467=671%:%
%:%1468=671%:%
%:%1469=672%:%
%:%1470=672%:%
%:%1471=673%:%
%:%1472=673%:%
%:%1473=674%:%
%:%1474=674%:%
%:%1475=675%:%
%:%1476=676%:%
%:%1477=676%:%
%:%1478=677%:%
%:%1479=677%:%
%:%1480=678%:%
%:%1481=678%:%
%:%1482=679%:%
%:%1483=679%:%
%:%1484=680%:%
%:%1485=680%:%
%:%1486=681%:%
%:%1487=681%:%
%:%1488=682%:%
%:%1489=682%:%
%:%1490=683%:%
%:%1491=683%:%
%:%1492=684%:%
%:%1493=684%:%
%:%1494=685%:%
%:%1495=685%:%
%:%1496=686%:%
%:%1497=686%:%
%:%1498=687%:%
%:%1499=688%:%
%:%1500=688%:%
%:%1501=689%:%
%:%1502=689%:%
%:%1503=690%:%
%:%1504=690%:%
%:%1505=691%:%
%:%1506=691%:%
%:%1507=692%:%
%:%1508=693%:%
%:%1509=693%:%
%:%1510=693%:%
%:%1511=694%:%
%:%1512=694%:%
%:%1513=695%:%
%:%1514=695%:%
%:%1515=696%:%
%:%1516=696%:%
%:%1517=696%:%
%:%1518=697%:%
%:%1519=697%:%
%:%1520=697%:%
%:%1521=698%:%
%:%1522=698%:%
%:%1523=698%:%
%:%1524=699%:%
%:%1525=699%:%
%:%1526=699%:%
%:%1527=700%:%
%:%1528=700%:%
%:%1529=701%:%
%:%1530=701%:%
%:%1531=701%:%
%:%1532=702%:%
%:%1533=702%:%
%:%1534=703%:%
%:%1535=703%:%
%:%1536=704%:%
%:%1537=704%:%
%:%1538=705%:%
%:%1539=705%:%
%:%1540=706%:%
%:%1541=706%:%
%:%1542=707%:%
%:%1543=707%:%
%:%1544=708%:%
%:%1545=708%:%
%:%1546=709%:%
%:%1547=709%:%
%:%1548=710%:%
%:%1549=710%:%
%:%1550=711%:%
%:%1551=711%:%
%:%1552=712%:%
%:%1553=712%:%
%:%1554=713%:%
%:%1555=713%:%
%:%1556=714%:%
%:%1557=714%:%
%:%1558=715%:%
%:%1559=715%:%
%:%1560=716%:%
%:%1561=716%:%
%:%1562=717%:%
%:%1563=717%:%
%:%1564=718%:%
%:%1565=718%:%
%:%1566=719%:%
%:%1567=719%:%
%:%1568=720%:%
%:%1569=720%:%
%:%1570=720%:%
%:%1571=721%:%
%:%1572=721%:%
%:%1573=722%:%
%:%1574=722%:%
%:%1575=723%:%
%:%1576=723%:%
%:%1577=724%:%
%:%1578=724%:%
%:%1579=724%:%
%:%1580=725%:%
%:%1581=726%:%
%:%1582=726%:%
%:%1583=727%:%
%:%1584=727%:%
%:%1585=728%:%
%:%1591=728%:%
%:%1594=729%:%
%:%1595=730%:%
%:%1596=730%:%
%:%1603=731%:%
